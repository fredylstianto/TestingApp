<!doctypehtml><html lang=id><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>UMKM Santui</title><style>body{font-family:Arial,sans-serif;margin:20px;background:#f9f9f9}h1,h2{color:#333}form{background:#fff;padding:15px;border-radius:8px;box-shadow:0 0 8px rgba(0,0,0,.1);max-width:400px;margin-bottom:30px}label{display:block;margin-top:10px;font-weight:700}input[type=number],select{width:100%;padding:8px;margin-top:5px;border-radius:4px;border:1px solid #ccc;box-sizing:border-box}button{margin-top:15px;padding:10px 15px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px}button:hover{background-color:#0056b3}.history,.milestone,.totals{background:#fff;padding:15px;border-radius:8px;box-shadow:0 0 8px rgba(0,0,0,.1);max-width:600px;margin-bottom:30px}table{width:100%;border-collapse:collapse;margin-top:10px}td,th{padding:8px;border-bottom:1px solid #ddd;text-align:left}th{background-color:#f2f2f2}.link-history{display:inline-block;margin-bottom:20px;text-decoration:none;color:#007bff;font-weight:700}.link-history:hover{text-decoration:underline}#totalAll{font-weight:700;margin-top:10px;color:#222}.milestone{text-align:center}.milestone h2{margin-bottom:15px}.progress-bar-container{width:100%;background-color:#e0e0e0;border-radius:25px;overflow:hidden;height:25px;margin-bottom:10px}.progress-bar{height:100%;width:0%;background-color:#28a745;text-align:center;color:#fff;line-height:25px;font-weight:700;transition:width .5s ease-in-out}.milestone-complete{color:#155724;background-color:#d4edda;border:1px solid #c3e6cb;padding:10px;border-radius:6px;font-weight:700}</style><h1>Input Setoran</h1><a class=link-history href=history.html>Lihat Riwayat Setoran Lengkap Â»</a><form id=depositForm><label for=name>Nama:</label><select id=name required><option value=""disabled selected>Pilih nama<option value=Herman>Herman<option value=Rudi>Rudi<option value=Dai>Dai<option value=Fredy>Fredy</select><label for=amount>Jumlah Uang (Rp):</label><input id=amount min=1 placeholder="Masukkan jumlah setoran"required type=number><button type=submit>Setor</button></form><div class=milestone><h2>Milestone: <span id=totalAll></span> / Rp 100.000.000</h2><div class=progress-bar-container><div class=progress-bar id=progressBar>0%</div></div><div id=milestoneMessage></div></div><div class=totals><h2>Total Setoran Per Nama</h2><table id=totalsTable><thead><tr><th>Nama<th>Total Setoran (Rp)<tbody><tr><td>Herman<td id=total-Herman>0<tr><td>Rudi<td id=total-Rudi>0<tr><td>Dai<td id=total-Dai>0<tr><td>Fredy<td id=total-Fredy>0</table></div><div class=history><h2>Riwayat Setoran Terbaru</h2><table id=historyTable><thead><tr><th>Nama<th>Jumlah (Rp)<th>Tanggal & Waktu<tbody></table></div><script src=https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js></script><script src=https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js></script><script>const firebaseConfig = { apiKey: "AIzaSyDgzH0ZCMCkQ4K4LrHpnY2bv9Nju7IOZtA", authDomain: "appsetoran.firebaseapp.com", projectId: "appsetoran", storageBucket: "appsetoran.firebasestorage.app", messagingSenderId: "853309222646", appId: "1:853309222646:web:27e0fd851e220384a486d7" }; firebase.initializeApp(firebaseConfig); const db = firebase.firestore(); const depositForm = document.getElementById('depositForm'); const historyTableBody = document.querySelector('#historyTable tbody'); const totals = { Herman: 0, Rudi: 0, Dai: 0, Fredy: 0 }; const totalAllElem = document.getElementById('totalAll'); const progressBar = document.getElementById('progressBar'); const milestoneMessage = document.getElementById('milestoneMessage'); const MILESTONE_TARGET = 100000000; function formatRupiah(number) { return number.toLocaleString('id-ID'); } function updateTotalsUI() { let totalAll = 0; for (const name in totals) { document.getElementById(`total-${name}`).textContent = formatRupiah(totals[name]); totalAll += totals[name]; } totalAllElem.textContent = `Rp ${formatRupiah(totalAll)}`; updateMilestone(totalAll); } function updateMilestone(total) { let percent = Math.min((total / MILESTONE_TARGET) * 100, 100); progressBar.style.width = percent + '%'; progressBar.textContent = `${percent.toFixed(2)}%`; if (total >= MILESTONE_TARGET) { milestoneMessage.innerHTML = `<div class="milestone-complete">ðŸŽ‰ Asik dah 100jt cuyyy ðŸŽ‰</div>`; progressBar.style.backgroundColor = '#218838'; } else { milestoneMessage.innerHTML = ''; progressBar.style.backgroundColor = '#28a745'; } } function loadDeposits() { db.collection('deposits').orderBy('timestamp', 'desc').limit(20).get().then(snapshot => { for (const name in totals) { totals[name] = 0; } historyTableBody.innerHTML = ''; snapshot.forEach(doc => { const data = doc.data(); const date = data.timestamp ? data.timestamp.toDate() : new Date(); const dateString = date.toLocaleString('id-ID', { dateStyle: 'short', timeStyle: 'short' }); if (totals.hasOwnProperty(data.name)) { totals[data.name] += data.amount; } const tr = document.createElement('tr'); tr.innerHTML = ` <td>${data.name}</td><td>${formatRupiah(data.amount)}</td><td>${dateString}</td> `; historyTableBody.appendChild(tr); }); updateTotalsUI(); }).catch(error => { console.error("Error loading deposits: ", error); }); } depositForm.addEventListener('submit', e => { e.preventDefault(); const name = depositForm.name.value; const amount = parseInt(depositForm.amount.value); if (!name || !amount || amount <= 0) { alert('Mohon isi nama dan jumlah setoran dengan benar.'); return; } db.collection('deposits').add({ name: name, amount: amount, timestamp: firebase.firestore.FieldValue.serverTimestamp() }).then(() => { depositForm.reset(); loadDeposits(); }).catch(error => { console.error("Error adding deposit: ", error); alert('Gagal menyimpan setoran. Silakan coba lagi.'); }); }); loadDeposits();</script>
